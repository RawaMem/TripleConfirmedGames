extends layout

include utils.pug

block content
    div= games.title
    div= games.rating
    div= games.studio
    div= games.description
    div= games.avgCleanRating
    div= games.releaseDate
    if user
        div #{user.firstName}
    div.anything
        +validationErrorSummary(errors)
        form(action=`/games/${games.id}`, method="post")
            input(type="hidden" name="_csrf" value=token)
            textarea(name="content")
            button(type="submit") Add A Review
    ul
        each review in games.Reviews
            li #{review.User.username}
            li #{review.content}
            li(id=`list${review.id}`) Likes: #{review.ReviewLikes.length}
            //- div(id=review.id class='reviewId')

            //- div(id=userId class='myGamesUserId')
            //- input(type="hidden" id='myGamesUserId' value=userId)
            //- div(id=shelfName class='myGamesGameId')
            if user
                div(id=userId class='userId')
                div(id=gameId class='gameId')
                //- form(action=`/reviews/${review.id}`, method="post")
                button( class=`likes` id=review.id) Like!
                if user.id === review.userId
                    a(href=`/reviews/${review.id}/edit`) Edit
                    a(href=`/reviews/${review.id}/delete`) Delete
    script(src="/javascripts/reviewLikes.js")
